<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>BizSetupGlobal </title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
          href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon"> -->
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/custom.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/responsive.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <script type='application/ld+json'>
        {
          "@context": "http://www.schema.org",
          "@type": "Organization",
          "name": "Fastest Company Formation | Company Set Up in India - BizSetupGlobal",
          "url": "https://www.bizsetupglobal.com/",
          "logo": "https://www.bizsetupglobal.com/images/logo.png",
          "description": "BizSetupGlobal is the leading and well-known for the Fastest company formation in India. Finding Consultant for Company set up or best company forms in India? Call us.",
          "address": {
             "@type": "PostalAddress",
             "addressCountry": "India"
          }
        }
        </script>
        
</head>

<body>
    <div class="container">
        <div class="row mt-5">
            <div class="col-12 col-md-6 text-center">
                <div class="logo-div mt-2">
                    <img src="img/Group 10842.svg" class="logo-image">
                </div>
                <div class="mb-4 pb-2">
                    <span class="welcome-text">Welcome to New Era</span>
                </div>
                <div class="">
                    <ul class="nav nav-tabs border-bottom-0 justify-content-center mb-5" id="myTab" role="tablist">
                        <li class="nav-item tab-button">
                          <a class="nav-link active" id="register-tab" data-toggle="tab" href="#register" role="tab" aria-controls="register" aria-selected="true">Register</a>
                        </li>
                        <li class="nav-item tab-button">
                          <a class="nav-link " id="sign-in-tab" data-toggle="tab" href="#sign-in" role="tab" aria-controls="sign-in" aria-selected="false">Sign In</a>
                        </li>
                    </ul>
                    <!-- Tab panes -->
                    <div class="tab-content mb-5">
                        <div class="tab-pane active" id="register" role="tabpanel" aria-labelledby="register-tab">
                            <a href="https://api.bizsetupglobal.com/oauth2/authorize/google?redirect_uri=https://bizsetupglobal.com/gmailredirect.html" class="btn sign-in-btn mb-5"><img src="img/google.png"> <span class="sign-in-btn-text">Register with Google</span></a>
                            <div class="mb-5 or-text-div"><span class="or-text">Or Sign Up with email</span></div>
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <form id="signUpForm">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="form-group text-left input-width">
                                                    <label for="name" class="input-text-label">Full Name</label>
                                                    <input type="text" name="name" class="form-control custom-form-input" id="name" placeholder="e.g Khalida Ahmed">
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="form-group text-left input-width">
                                                    <label for="email" class="input-text-label">Email</label>
                                                    <input type="text" class="form-control custom-form-input" name="email" id="email" placeholder="Email">
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="form-group text-left input-width">
                                                    <label for="message" class="input-text-label">Password</label>
                                                    <input type="password" class="form-control custom-form-input" name="password" id="password" placeholder="Password of 6-8 characters">
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="form-group text-left input-width">
                                                    <button type="submit" class="form-control submit-button custom-form-input" title="submit"><span class="submit-btn-text">Create Account</span></button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="sign-in" role="tabpanel" aria-labelledby="sign-in-tab">
                            <!-- <a href="https://api.bizsetupglobal.com/oauth2/authorize/google?redirect_uri=https://bizsetupglobal.com/gmailredirect.html" class="btn sign-in-btn mb-5"><img src="img/google.png"> <span class="sign-in-btn-text">Sign In with Google</span></a> -->
                            <div class="mb-5 or-text-div"><span class="or-text">Or Sign Up with email</span></div>
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <form id="signInForm">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="form-group text-left input-width">
                                                    <label for="login_email" class="input-text-label">Email</label>
                                                    <input type="email" class="form-control custom-form-input" name="login_email" id="login_email" placeholder="Email" required>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="form-group text-left input-width">
                                                    <label for="login_password" class="input-text-label">Password</label>
                                                    <input type="password" class="form-control custom-form-input" name="login_password" id="login_password" placeholder="Password of 6-8 characters" required>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="form-group text-left input-width">
                                                    <button type="submit" class="form-control submit-button custom-form-input" title="submit"><span class="submit-btn-text">Sign In</span></button>
                                                </div>
                                            </div>
                                            <div class="col-lg-12 mt-3">
                                                <div class="form-group text-center input-width">
                                                    <a href="#" class="forgot-password-link">Forgot Password? </a>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-6 bg-mountain-meadow d-flex align-items-center">
                <div class="group-img-div">
                    <img src="img/Group10843.svg" class="w-100">
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.4/dist/sweetalert2.all.min.js"></script>
    <script>
        urlHash = window.location.hash 
        if( urlHash == '#sign-in' ){
            $('#register-tab').removeClass('active');
            $('#sign-in-tab').addClass('active');
            
            $('#register').removeClass('active');
            $('#sign-in').addClass('active');
        }


        $(document).ready(function(){
            $('#signInForm').submit(function(e) {
                console.log('asdas')
                e.preventDefault();
                e.stopPropagation();
                let email = $('#login_email').val();
                let password = $('#login_password').val();
                let data = {"email": email, "password": password};
                $.ajax({
                    url: "https://api.bizsetupglobal.com/api/auth/login",
                    // url: "http://localhost:8080/api/auth/login",
                    type: "POST",
                    crossDomain: true,
                    data: JSON.stringify(data),
                    dataType: "json",
                    headers : {
                        "content-type": "application/json",
                        "cache-control": "no-cache",
                    },
                    success:function(result) {
                        let token = result.accessToken;
                        if (window.localStorage.getItem("amount") === null) {
                            let timerInterval;
                            Swal.fire({
                              title: 'Please login through dashboard',
                              html: 'Redirecting to dashboard website',
                              timer: 2000,
                              timerProgressBar: true,
                              didOpen: () => {
                                Swal.showLoading() 
                              },
                              willClose: () => {
                                clearInterval(timerInterval)
                              }
                            }).then((result) => {
                              if (result.dismiss === Swal.DismissReason.timer) {                            
                                window.location.href = "https://dashboard.bizsetupglobal.com";
                              }
                            })
                        } else {                         
                            let amount = window.localStorage.getItem('amount');
                            let serviceCode = window.localStorage.getItem('serviceCode');
                            let getLinkRequest = {
                                url: "https://api.bizsetupglobal.com/api/pg/link?amount=" + amount + "&serviceCode=" + serviceCode,
                                // url: "http://localhost:8080/api/pg/link?amount=" + amount + "&serviceCode=" + serviceCode,
                                type: "GET",
                                crossDomain: true,
                                headers: {
                                    "authorization": "Bearer " + token
                                }
                            }
                            $.ajax(getLinkRequest).done(function (response) {
                                window.localStorage.clear();
                                let timerInterval;
                                Swal.fire({
                                  title: 'Login Completed!',
                                  html: 'Redirecting to payment page',
                                  timer: 3000,
                                  timerProgressBar: true,
                                  didOpen: () => {
                                    Swal.showLoading() 
                                  },
                                  willClose: () => {
                                    clearInterval(timerInterval)
                                  }
                                }).then((result) => {
                                  if (result.dismiss === Swal.DismissReason.timer) {                            
                                    window.location.href = response;
                                  }
                                })                          
                            });   
                        }
                    },
                    error:function(xhr,status,error) {
                        Swal.fire({
                          icon: 'error',
                          title: 'Oops...',
                          text: $.parseJSON(xhr.responseText).message
                        });
                    }
                });
            });
        });

        $(document).ready(function(){
            $('#signUpForm').submit(function(e) {
                e.preventDefault();
                e.stopPropagation();
                let name = $('#name').val();
                let email = $('#email').val();
                let password = $('#password').val();
                let data = {"email": email, "password": password, "name": name};
                $.ajax({
                    url: "https://api.bizsetupglobal.com/api/auth/signup",
                    // url: "http://localhost:8080/api/auth/signup",
                    type: "POST",
                    crossDomain: true,
                    data: JSON.stringify(data),
                    dataType: "json",
                    headers : {
                        "content-type": "application/json",
                        "cache-control": "no-cache",
                    },
                    success:function(result) {
                        let timerInterval;
                        Swal.fire({
                          title: 'Registration Completed!',
                          html: 'Redirecting to Signin page',
                          timer: 3000,
                          timerProgressBar: true,
                          didOpen: () => {
                            Swal.showLoading() 
                          },
                          willClose: () => {
                            clearInterval(timerInterval)
                          }
                        }).then((result) => {
                          if (result.dismiss === Swal.DismissReason.timer) {                            
                            window.location.href = "./register.html#sign-in";
                            window.location.reload();
                          }
                        })       
                    },
                    error:function(xhr,status,error) {
                        Swal.fire({
                          icon: 'error',
                          title: 'Oops...',
                          text: $.parseJSON(xhr.responseText).message
                        });
                    }
                });
            });
        });
    
    </script>
</body>


</html>